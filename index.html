<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golf Practice Tracker</title>
  <meta name="theme-color" content="#0ea5e9" />
  <style>
    :root{--bg:#0b1220;--card:#101829;--ink:#e5ecff;--muted:#9db4ff;--accent:#38bdf8;--ok:#22c55e;--bad:#ef4444;--warn:#f59e0b}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial; background:linear-gradient(180deg,#0b1220,#0f172a); color:var(--ink)}
    a{color:var(--accent)}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;position:sticky;top:0;background:rgba(11,18,32,.85);backdrop-filter:blur(6px);padding:10px 16px;border-bottom:1px solid #1f2a44;z-index:5}
    .title{display:flex;gap:10px;align-items:center}
    nav{display:flex;gap:8px}
    .tab{border:1px solid #1f2a44;background:var(--card);color:var(--ink);padding:8px 12px;border-radius:12px;cursor:pointer}
    .tab.active{border-color:var(--accent);box-shadow:0 0 0 2px rgba(56,189,248,.25) inset}
    .grid{display:grid;gap:12px}
    .cards{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .card{background:var(--card);border:1px solid #1f2a44;border-radius:16px;padding:14px}
    h1,h2,h3{margin:0 0 8px}
    h1{font-size:22px}
    h2{font-size:18px;color:var(--muted)}
    h3{font-size:16px;color:var(--muted)}
    label{font-size:13px;color:#c7d2fe}
    input,textarea,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #2a3558;background:#0c1427;color:var(--ink);outline:none}
    input[type=number]{appearance:textfield}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>div{flex:1 1 220px}
    .btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;background:var(--accent);border:0;color:#052338;padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid #1f2a44;color:var(--ink)}
    .btn.warn{background:var(--bad);color:white}
    .small{font-size:12px;color:#9db4ff}
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid #1f2a44;padding:8px 6px;text-align:left;font-size:13px;vertical-align:top}
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid #223055;color:#c7d2fe;font-size:12px}
    .section{border-top:1px dashed #223055;padding-top:8px;margin-top:8px}
    .flex-between{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .list{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 10px;border:1px solid #243257;border-radius:999px}
    .chip.sel{border-color:var(--accent);box-shadow:0 0 0 2px rgba(56,189,248,.2) inset}
    .hide{display:none}
  </style>
</head>
<body>
  <header>
    <div class="title">
      <h1>Golf Practice Tracker</h1>
    </div>
    <nav>
      <button class="tab active" data-tab="plan">Plan</button>
      <button class="tab" data-tab="track">Track</button>
      <button class="tab" data-tab="stats">Stats</button>
    </nav>
  </header>

  <main class="wrap">
    <!-- PLAN TAB -->
    <section id="plan" class="grid">
      <div class="card">
        <h2>Practice Plan</h2>
        <div class="section">
          <label>Saved Plans</label>
          <select id="practicePicker"></select>
        </div>
        <div class="section">
          <label>Plan Name</label>
          <input id="planName" />
        </div>
        <div class="section">
          <h3>Drill Library</h3>
          <div id="library"></div>
          <button class="btn" id="addDrillBtn">Add Drill</button>
        </div>
      </div>
    </section>

    <!-- TRACK TAB -->
    <section id="track" class="grid hide">
      <div class="card">
        <h2>Track Session</h2>
        <div id="trackingForm"></div>
        <button class="btn" id="saveSession">Save Session</button>
      </div>
    </section>

    <!-- STATS TAB -->
    <section id="stats" class="grid hide">
      <div class="card">
        <h2>Stats</h2>
        <div id="statsSummary"></div>
      </div>
    </section>
  </main>

  <script>
  const $ = q=>document.querySelector(q);
  const el = (tag, attrs={}, html='')=>{
    const x=document.createElement(tag);
    Object.entries(attrs).forEach(([k,v])=>x.setAttribute(k,v));
    if(html) x.innerHTML=html;
    return x;
  };

  const defaultDrills = [
    {id:'gate', name:'Gate Drill', cat:'Putting', type:'%', defAttempts:20},
    {id:'circle', name:'Circle Drill', cat:'Putting', type:'%', defAttempts:10},
    {id:'lag', name:'Lag Drill', cat:'Putting', type:'Points', defAttempts:15},
    {id:'towel', name:'Towel Drill', cat:'Chipping', type:'%', defAttempts:30},
    {id:'updown', name:'Up & Down', cat:'Chipping', type:'%', defAttempts:9},
    {id:'gir', name:'Virtual 9 GIR', cat:'Range', type:'%', defAttempts:9},
    {id:'iron', name:'7i Narrow', cat:'Range', type:'%', defAttempts:10},
    {id:'driver', name:'Driver Narrow', cat:'Range', type:'%', defAttempts:10},
    {id:'note', name:'Range Notes', cat:'Range', type:'Other'}
  ];

  let drills = JSON.parse(localStorage.getItem('drills')||'null') || defaultDrills;
  let sessions = JSON.parse(localStorage.getItem('sessions')||'null') || [];

  function saveAll(){ localStorage.setItem('drills',JSON.stringify(drills)); localStorage.setItem('sessions',JSON.stringify(sessions)); }

  function renderPlan(){
    const lib=$('#library'); lib.innerHTML='';
    const table=el('table');
    table.innerHTML='<tr><th>Name</th><th>Cat</th><th>Type</th></tr>';
    drills.forEach(d=>{
      const tr=el('tr');
      tr.innerHTML=`<td>${d.name}</td><td>${d.cat}</td><td>${d.type}</td>`;
      table.appendChild(tr);
    });
    lib.appendChild(table);
  }

  function renderTrack(){
    const form=$('#trackingForm'); form.innerHTML='';
    drills.forEach(d=>{
      if(d.type==='%'){
        form.innerHTML+=`<label>${d.name} Made/Att:</label><input id="m_${d.id}" type="number">/<input id="t_${d.id}" type="number"><br>`;
      }else if(d.type==='Points'){
        form.innerHTML+=`<label>${d.name} Points/Max:</label><input id="m_${d.id}" type="number">/<input id="t_${d.id}" type="number"><br>`;
      }else{
        form.innerHTML+=`<label>${d.name} Notes:</label><input id="n_${d.id}" type="text"><br>`;
      }
    });
  }

  function renderStats(){
    const s=$('#statsSummary'); s.innerHTML='';
    drills.forEach(d=>{
      if(d.type==='Other') return;
      let vals=sessions.map(x=>x[d.id]).filter(Boolean);
      if(!vals.length) return;
      let avg=vals.map(v=>v.t>0?(v.m/v.t*100):0).reduce((a,b)=>a+b,0)/vals.length;
      s.innerHTML+=`<div>${d.name}: ${avg.toFixed(1)}%</div>`;
    });
  }

  $('#saveSession').onclick=()=>{
    const rec={};
    drills.forEach(d=>{
      if(d.type==='%'||d.type==='Points'){
        const m=+$('#m_'+d.id).value||0;
        const t=+$('#t_'+d.id).value||0;
        rec[d.id]={m,t};
      }else{
        rec[d.id]={n:$('#n_'+d.id).value};
      }
    });
    sessions.push(rec); saveAll(); alert('Saved'); renderStats();
  };

  document.querySelectorAll('.tab').forEach(btn=>btn.onclick=()=>{
    document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('main section').forEach(s=>s.classList.add('hide'));
    document.getElementById(btn.dataset.tab).classList.remove('hide');
    if(btn.dataset.tab==='plan') renderPlan();
    if(btn.dataset.tab==='track') renderTrack();
    if(btn.dataset.tab==='stats') renderStats();
  });

  renderPlan();
  </script>
</body>
</html>
